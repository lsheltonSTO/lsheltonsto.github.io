<!doctype html><html lang=en itemscope itemtype=http://schema.org/WebPage><head><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1"><link rel=icon href=/images/LTS.png><title>From Concept to Chatbot: ServiceNow with Copilot Studio - Part 2 - Lindsay T Shelton</title><meta name=description content="Head back to the intro post to get the use case and architecture of the Copilot Studio bots I&rsquo;ll be describing in these blog posts, and head to part 1 to get a general overview of Copilot Studio, Topics, how I figured out troubleshooting the bot (the best you can at this point in Copilot Studio), and an overview of the Power Automate flows used in the initial POC I built."><meta name=author content="Lindsay Shelton"><meta name=generator content="Hugo 0.108.0"><link rel=stylesheet href="https://blist.vercel.app/css/styles.min.c0846aac9db6c87efe354bad93a5e4432ef35cc12598aeed07df50323381cc06.css" integrity="sha256-wIRqrJ22yH7+NUutk6XkQy7zXMElmK7tB99QMjOBzAY="><meta property="og:title" content="From Concept to Chatbot: ServiceNow with Copilot Studio - Part 2"><meta property="og:description" content="Head back to the intro post to get the use case and architecture of the Copilot Studio bots I&rsquo;ll be describing in these blog posts, and head to part 1 to get a general overview of Copilot Studio, Topics, how I figured out troubleshooting the bot (the best you can at this point in Copilot Studio), and an overview of the Power Automate flows used in the initial POC I built."><meta property="og:type" content="article"><meta property="og:url" content="https://blist.vercel.app/blog/202409from_concept_to_chatbot_servicenow_with_copilot_studio_part2/"><meta property="article:section" content="blog"><meta property="article:published_time" content="2024-09-10T09:29:05-05:00"><meta property="article:modified_time" content="2024-09-10T09:29:05-05:00"><meta name=twitter:card content="summary"><meta name=twitter:title content="From Concept to Chatbot: ServiceNow with Copilot Studio - Part 2"><meta name=twitter:description content="Head back to the intro post to get the use case and architecture of the Copilot Studio bots I&rsquo;ll be describing in these blog posts, and head to part 1 to get a general overview of Copilot Studio, Topics, how I figured out troubleshooting the bot (the best you can at this point in Copilot Studio), and an overview of the Power Automate flows used in the initial POC I built."><meta itemprop=name content="From Concept to Chatbot: ServiceNow with Copilot Studio - Part 2"><meta itemprop=description content="Head back to the intro post to get the use case and architecture of the Copilot Studio bots I&rsquo;ll be describing in these blog posts, and head to part 1 to get a general overview of Copilot Studio, Topics, how I figured out troubleshooting the bot (the best you can at this point in Copilot Studio), and an overview of the Power Automate flows used in the initial POC I built."><meta itemprop=datePublished content="2024-09-10T09:29:05-05:00"><meta itemprop=dateModified content="2024-09-10T09:29:05-05:00"><meta itemprop=wordCount content="726"><meta itemprop=keywords content="power automate,copilot studio,service-now,how to,"></head><body class="dark:bg-gray-800 dark:text-white relative flex flex-col min-h-screen"><header class="container flex justify-between md:justify-between gap-4 flex-wrap p-6 mx-auto relative"><a href=https://blist.vercel.app/ class="capitalize font-extrabold text-2xl"><img src=/images/LTS2.png alt="Lindsay T Shelton" class="h-8 max-w-full"></a>
<button class="mobile-menu-button md:hidden"><svg xmlns="http://www.w3.org/2000/svg" width="30" height="30" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentcolor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z" fill="none"/><line x1="4" y1="8" x2="20" y2="8"/><line x1="4" y1="16" x2="20" y2="16"/></svg></button><ul class="mobile-menu absolute z-10 px-6 pb-6 md:p-0 top-full left-0 w-full md:w-auto md:relative hidden md:flex flex-col md:flex-row items-end md:items-center gap-4 lg:gap-6 bg-white dark:bg-gray-800"><li><a href=/blog>Blog</a></li><li><a href=/page/about/>About</a></li><li><a href=/tags>Tags</a></li><li class="grid place-items-center"><span class="open-search inline-block cursor-pointer"><svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentcolor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z" fill="none"/><circle cx="10" cy="10" r="7"/><line x1="21" y1="21" x2="15" y2="15"/></svg></span></li><li class="grid place-items-center"><span class="toggle-dark-mode inline-block cursor-pointer"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentcolor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z" fill="none"/><circle cx="12" cy="12" r="3"/><line x1="12" y1="5" x2="12" y2="5.01"/><line x1="17" y1="7" x2="17" y2="7.01"/><line x1="19" y1="12" x2="19" y2="12.01"/><line x1="17" y1="17" x2="17" y2="17.01"/><line x1="12" y1="19" x2="12" y2="19.01"/><line x1="7" y1="17" x2="7" y2="17.01"/><line x1="5" y1="12" x2="5" y2="12.01"/><line x1="7" y1="7" x2="7" y2="7.01"/></svg></span></li></ul></header><main class=flex-1><article class="prose lg:prose-lg mx-auto my-8 dark:prose-dark px-4"><h1 class="text-2xl font-bold mb-2">From Concept to Chatbot: ServiceNow with Copilot Studio - Part 2</h1><h5 class="text-sm flex items-center flex-wrap"><svg xmlns="http://www.w3.org/2000/svg" class="mr-1" width="16" height="16" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentcolor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z" fill="none"/><rect x="4" y="5" width="16" height="16" rx="2"/><line x1="16" y1="3" x2="16" y2="7"/><line x1="8" y1="3" x2="8" y2="7"/><line x1="4" y1="11" x2="20" y2="11"/><rect x="8" y="15" width="2" height="2"/></svg>Posted on
September 10, 2024
&nbsp;&bull;&nbsp;<svg xmlns="http://www.w3.org/2000/svg" class="mr-1" width="16" height="16" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentcolor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z" fill="none"/><circle cx="12" cy="12" r="9"/><polyline points="12 7 12 12 15 15"/></svg>
4&nbsp;minutes
&nbsp;&bull;<svg xmlns="http://www.w3.org/2000/svg" class="mx-1" width="16" height="16" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentcolor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z" fill="none"/><path d="M3 19a9 9 0 019 0 9 9 0 019 0"/><path d="M3 6a9 9 0 019 0 9 9 0 019 0"/><line x1="3" y1="6" x2="3" y2="19"/><line x1="12" y1="6" x2="12" y2="19"/><line x1="21" y1="6" x2="21" y2="19"/></svg>
726&nbsp;words</h5><details id=TableOfContents class="px-4 mt-4 bg-gray-100 dark:bg-gray-700 rounded toc"><summary class="flex items-center font-bold py-2 px-4 cursor-pointer justify-between select-none text-black dark:text-white"><span>Table of contents</span><svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-chevron-down" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentcolor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z" fill="none"/><polyline points="6 9 12 15 18 9"/></svg></summary><ul class="mt-2 pb-4"><li><a href=#the-power-automate-flow---get-sys_id>The Power Automate Flow - Get sys_id</a></li></ul></details><p>Head back to the <a href=https://www.lindsaytshelton.com/blog/202409from_concept_to_chatbot_servicenow_with_copilot_studio_intro/>intro post</a> to get the use case and architecture of the Copilot Studio bots I&rsquo;ll be describing in these blog posts, and <a href=https://www.lindsaytshelton.com/blog/202409from_concept_to_chatbot_servicenow_with_copilot_studio_part1/>head to part 1</a> to get a general overview of Copilot Studio, Topics, how I figured out troubleshooting the bot (the best you can at this point in Copilot Studio), and an overview of the Power Automate flows used in the initial POC I built.</p><p>Today&rsquo;s post is about starting a conversation, aka the Conversation Start system topic. This is the first topic that the user will encounter when they start a conversation with the chatbot. It&rsquo;s a good idea to have a greeting and a prompt for the user to start the conversation.</p><p>Note that this behavior you see when testing will not behave the same way if and when the bot is deployed to Teams (at least at the time this blog was published). The user can ask it whatever trigger phrases they want, but they won’t get the menu to pick from upon first interaction for whatever reason.</p><p>We start out in this topic by inserting a sneaky flow as the very second node of our Conversation Start Topic - &ldquo;Run a flow from Copilot - Get sys_id&rdquo;. This flow is a premium flow that calls the ServiceNow API to get the user&rsquo;s sys_id based on their email address, System.User.Email, an automatically generated variable. This is important because we will use this sys_id in our HTTP calls to ServiceNow to identify the user instead of having them log into ServiceNow, as that experience is not the most user-friendly at this point. This way, they are silently logged in and we get the information we need from them without them having to do anything but open the bot in Teams or a canvas app.</p><p>This sys_id is an important global variable because we will use it in almost all of our future HTTP calls to ServiceNow to identify the user. As soon as we get the user’s sys_id, we ask them what they would like help with today. They can also achieve this experience by entering phrases, which we will get to later.</p><p><img src=/images/concept_to_chatbot16.png alt=Placeholder></p><p>This is what it looks like to the end user:</p><p><img src=/images/concept_to_chatbot17.png alt=Placeholder></p><p>If they ask a question, it prompts them to ask the question before redirecting them to the “Conversational boosting” topic, and storing that question in a global variable (Global.UserQuestion). For each other type, they are immediately redirected to the appropriate topic.</p><h2 id=the-power-automate-flow---get-sys_id>The Power Automate Flow - Get sys_id</h2><p>We add one trigger text input - Email. When you go back to Copilot Studio and actually add in the flow, the value you will enter for this is System.User.Email. This is the email address of the user that is interacting with the bot. This is the only input we need for this flow.</p><p>This flow just has two actions in it after the trigger - a premium HTTP call and the &ldquo;Return value to Power Virtual Agents/Respond to Copilot&rdquo; action.</p><p><img src=/images/concept_to_chatbot18.png alt=Placeholder></p><p>This is the entire flow! The hardest parts are getting the HTTP call right, getting your authorization working, and the formula to return just the sys_id, but I&rsquo;ve got you covered for all three.</p><ul><li>HTTP Call: https://(insert your instance name here).service-now.com/api/now/table/sys_user?sysparm_query=email=@{triggerBody()[&rsquo;text&rsquo;]} AKA https://(insert your instance name here)service-now.com/api/now/table/sys_user?sysparm_query=email=(dynamic content for Email input). This is a GET call. Set your headers just like mine in the picture.</li><li>Authorization: I used Raw as the method (expand &ldquo;Show advanced options&rdquo;) and put my username and password into one string like this: username:password. I then took &ldquo;username:password&rdquo; and used a Base 64 encoder website to encode the value. Then for the Raw value, you just put the word &ldquo;Basic " and then your encoded username/password.</li><li>Return value to Power Virtual Agents/Respond to Copilot: This is where you will put the formula to return just the sys_id. This is what I used: body(&lsquo;HTTP&rsquo;)?[&lsquo;result&rsquo;][0][&lsquo;sys_id&rsquo;]</li></ul><p>Go back to Copilot Studio and refresh the flow action. You should now see your input and your output as options. Set your sysid output as a Global variable that I called Global.userSysId. Now we can use it in all of our topics.</p><p>I&rsquo;ll see you in <a href=https://www.lindsaytshelton.com/blog/202409from_concept_to_chatbot_servicenow_with_copilot_studio_part3/>part 3</a>, where we get into the really cool stuff - conversational boosting!</p><p>Want to contact me about your own Copilot Studio ServiceNow bot? Do so below!</p><style>form{max-width:600px;margin:20px auto;padding:20px;border:1px solid #ccc;border-radius:10px;background-color:#f9f9f9}label{display:block;margin-bottom:10px;font-weight:700}input[type=email],textarea{width:100%;padding:10px;margin-bottom:20px;border:1px solid #ccc;border-radius:5px}button[type=submit]{background-color:#ff69b4;color:#fff;padding:10px 20px;border:none;border-radius:5px;cursor:pointer;font-size:16px}button[type=submit]:hover{background-color:#ff1493}</style><form action=https://formspree.io/f/mqazoelw method=post><label>Your email:
<input type=email name=email required></label>
<label>Your message:
<textarea name=message required></textarea></label>
<button type=submit>Send</button></form><script async src="https://www.googletagmanager.com/gtag/js?id=G-CN3PDT3T20"></script>
<script>window.dataLayer=window.dataLayer||[];function gtag(){dataLayer.push(arguments)}gtag("js",new Date),gtag("config","G-CN3PDT3T20")</script><blockquote></blockquote></article><div class="px-2 mb-2"><script src=https://giscus.app/client.js data-repo data-repo-id data-category data-category-id data-mapping=pathname data-strict=0 data-reactions-enabled=1 data-emit-metadata=0 data-input-position=bottom data-theme=preferred_color_scheme data-lang=en crossorigin=anonymous async></script></div><div class="bg-pink-100 dark:bg-gray-900"><div class="container px-4 py-12 mx-auto max-w-4xl grid grid-cols-1 md:grid-cols-2 gap-4 items-center"><div><div class="text-2xl font-bold mb-2">Follow me</div><p class=opacity-60>Follow along for Power Platform, M365, and cat goodness</p></div><ul class="flex justify-center gap-x-3 flex-wrap gap-y-2"><li><a href=https://linkedin.com/in/lindsaytshelton target=_blank rel=noopener aria-label=LinkedIn class="p-1 inline-block rounded-full border border-transparent text-gray-500 hover:text-gray-800 hover:border-gray-800 cursor-pointer transition-colors dark:text-gray-600 dark:hover:border-gray-300 dark:hover:text-gray-300"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentcolor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z" fill="none"/><rect x="4" y="4" width="16" height="16" rx="2"/><line x1="8" y1="11" x2="8" y2="16"/><line x1="8" y1="8" x2="8" y2="8.01"/><line x1="12" y1="16" x2="12" y2="11"/><path d="M16 16v-3a2 2 0 00-4 0"/></svg></a></li></ul></div></div></main><footer class="container p-6 mx-auto flex justify-between items-center"><span class="text-sm font-light">Copyright © 2024 - Lindsay Shelton · All rights reserved</span>
<span onclick='window.scrollTo({top:0,behavior:"smooth"})' class="p-1 cursor-pointer"><svg xmlns="http://www.w3.org/2000/svg" width="30" height="30" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentcolor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z" fill="none"/><path d="M18 15l-6-6-6 6h12"/></svg></span></footer><div class="search-ui absolute top-0 left-0 w-full h-full bg-white dark:bg-gray-800 hidden"><div class="container max-w-3xl mx-auto p-12"><div class=relative><div class="my-4 text-center text-2xl font-bold">Search</div><span class="p-2 absolute right-0 top-0 cursor-pointer close-search"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentcolor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z" fill="none"/><line x1="18" y1="6" x2="6" y2="18"/><line x1="6" y1="6" x2="18" y2="18"/></svg></span></div><input type=search class="py-2 px-3 w-full dark:text-black border dark:border-transparent" placeholder="Enter search query"><div class="search-results text-lg font-medium my-4 hidden">Results</div><ul class="search-list my-2"></ul><div class="no-results text-center my-8 hidden"><div class="text-xl font-semibold mb-2">No results found</div><p class="font-light text-sm">Try adjusting your search query</p></div></div></div><script src=https://blist.vercel.app/js/scripts.min.js></script>
<script>const darkmode=document.querySelector(".toggle-dark-mode");function toggleDarkMode(){document.documentElement.classList.contains("dark")?(document.documentElement.classList.remove("dark"),localStorage.setItem("darkmode","light")):(document.documentElement.classList.add("dark"),localStorage.setItem("darkmode","dark"))}darkmode&&darkmode.addEventListener("click",toggleDarkMode);const darkStorage=localStorage.getItem("darkmode"),isBrowserDark=window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").matches;!darkStorage&&isBrowserDark&&document.documentElement.classList.add("dark"),darkStorage&&darkStorage==="dark"&&toggleDarkMode()</script><script>const mobileMenuButton=document.querySelector(".mobile-menu-button"),mobileMenu=document.querySelector(".mobile-menu");function toggleMenu(){mobileMenu.classList.toggle("hidden"),mobileMenu.classList.toggle("flex")}mobileMenu&&mobileMenuButton&&mobileMenuButton.addEventListener("click",toggleMenu)</script></body></html>