<!doctype html><html lang=en itemscope itemtype=http://schema.org/WebPage><head><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1"><link rel=icon href=/images/LTS.png><title>Using Row-Level Security in Power BI and Power Automate - Lindsay T Shelton</title><meta name=description content="Power BI is not my normal wheelhouse, but when duty calls, I answer. I was recently asked to help update a report in Power BI that does all sorts of SQL calls to a database - how all of that works is a mystery to me. However, we were managing security by updating 19 different reports, one for each lab. This was a nightmare to maintain and update, as I discovered when my job was to go in and update all 19 of those reports."><meta name=author content="Lindsay Shelton"><meta name=generator content="Hugo 0.108.0"><link rel=stylesheet href="https://blist.vercel.app/css/styles.min.c0846aac9db6c87efe354bad93a5e4432ef35cc12598aeed07df50323381cc06.css" integrity="sha256-wIRqrJ22yH7+NUutk6XkQy7zXMElmK7tB99QMjOBzAY="><meta property="og:title" content="Using Row-Level Security in Power BI and Power Automate"><meta property="og:description" content="Power BI is not my normal wheelhouse, but when duty calls, I answer. I was recently asked to help update a report in Power BI that does all sorts of SQL calls to a database - how all of that works is a mystery to me. However, we were managing security by updating 19 different reports, one for each lab. This was a nightmare to maintain and update, as I discovered when my job was to go in and update all 19 of those reports."><meta property="og:type" content="article"><meta property="og:url" content="https://blist.vercel.app/blog/20240105using_row_level_security_in_power_bi_and_power_automate/"><meta property="article:section" content="blog"><meta property="article:published_time" content="2024-01-05T11:29:05-05:00"><meta property="article:modified_time" content="2024-01-05T11:29:05-05:00"><meta name=twitter:card content="summary"><meta name=twitter:title content="Using Row-Level Security in Power BI and Power Automate"><meta name=twitter:description content="Power BI is not my normal wheelhouse, but when duty calls, I answer. I was recently asked to help update a report in Power BI that does all sorts of SQL calls to a database - how all of that works is a mystery to me. However, we were managing security by updating 19 different reports, one for each lab. This was a nightmare to maintain and update, as I discovered when my job was to go in and update all 19 of those reports."><meta itemprop=name content="Using Row-Level Security in Power BI and Power Automate"><meta itemprop=description content="Power BI is not my normal wheelhouse, but when duty calls, I answer. I was recently asked to help update a report in Power BI that does all sorts of SQL calls to a database - how all of that works is a mystery to me. However, we were managing security by updating 19 different reports, one for each lab. This was a nightmare to maintain and update, as I discovered when my job was to go in and update all 19 of those reports."><meta itemprop=datePublished content="2024-01-05T11:29:05-05:00"><meta itemprop=dateModified content="2024-01-05T11:29:05-05:00"><meta itemprop=wordCount content="1565"><meta itemprop=keywords content="power automate,power bi,row-level security,how to,"></head><body class="dark:bg-gray-800 dark:text-white relative flex flex-col min-h-screen"><header class="container flex justify-between md:justify-between gap-4 flex-wrap p-6 mx-auto relative"><a href=https://blist.vercel.app/ class="capitalize font-extrabold text-2xl"><img src=/images/LTS2.png alt="Lindsay T Shelton" class="h-8 max-w-full"></a>
<button class="mobile-menu-button md:hidden"><svg xmlns="http://www.w3.org/2000/svg" width="30" height="30" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentcolor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z" fill="none"/><line x1="4" y1="8" x2="20" y2="8"/><line x1="4" y1="16" x2="20" y2="16"/></svg></button><ul class="mobile-menu absolute z-10 px-6 pb-6 md:p-0 top-full left-0 w-full md:w-auto md:relative hidden md:flex flex-col md:flex-row items-end md:items-center gap-4 lg:gap-6 bg-white dark:bg-gray-800"><li><a href=/blog>Blog</a></li><li><a href=/page/about/>About</a></li><li><a href=/tags>Tags</a></li><li class="grid place-items-center"><span class="open-search inline-block cursor-pointer"><svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentcolor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z" fill="none"/><circle cx="10" cy="10" r="7"/><line x1="21" y1="21" x2="15" y2="15"/></svg></span></li><li class="grid place-items-center"><span class="toggle-dark-mode inline-block cursor-pointer"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentcolor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z" fill="none"/><circle cx="12" cy="12" r="3"/><line x1="12" y1="5" x2="12" y2="5.01"/><line x1="17" y1="7" x2="17" y2="7.01"/><line x1="19" y1="12" x2="19" y2="12.01"/><line x1="17" y1="17" x2="17" y2="17.01"/><line x1="12" y1="19" x2="12" y2="19.01"/><line x1="7" y1="17" x2="7" y2="17.01"/><line x1="5" y1="12" x2="5" y2="12.01"/><line x1="7" y1="7" x2="7" y2="7.01"/></svg></span></li></ul></header><main class=flex-1><article class="prose lg:prose-lg mx-auto my-8 dark:prose-dark px-4"><h1 class="text-2xl font-bold mb-2">Using Row-Level Security in Power BI and Power Automate</h1><h5 class="text-sm flex items-center flex-wrap"><svg xmlns="http://www.w3.org/2000/svg" class="mr-1" width="16" height="16" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentcolor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z" fill="none"/><rect x="4" y="5" width="16" height="16" rx="2"/><line x1="16" y1="3" x2="16" y2="7"/><line x1="8" y1="3" x2="8" y2="7"/><line x1="4" y1="11" x2="20" y2="11"/><rect x="8" y="15" width="2" height="2"/></svg>Posted on
January 5, 2024
&nbsp;&bull;&nbsp;<svg xmlns="http://www.w3.org/2000/svg" class="mr-1" width="16" height="16" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentcolor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z" fill="none"/><circle cx="12" cy="12" r="9"/><polyline points="12 7 12 12 15 15"/></svg>
8&nbsp;minutes
&nbsp;&bull;<svg xmlns="http://www.w3.org/2000/svg" class="mx-1" width="16" height="16" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentcolor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z" fill="none"/><path d="M3 19a9 9 0 019 0 9 9 0 019 0"/><path d="M3 6a9 9 0 019 0 9 9 0 019 0"/><line x1="3" y1="6" x2="3" y2="19"/><line x1="12" y1="6" x2="12" y2="19"/><line x1="21" y1="6" x2="21" y2="19"/></svg>
1565&nbsp;words</h5><details id=TableOfContents class="px-4 mt-4 bg-gray-100 dark:bg-gray-700 rounded toc"><summary class="flex items-center font-bold py-2 px-4 cursor-pointer justify-between select-none text-black dark:text-white"><span>Table of contents</span><svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-chevron-down" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentcolor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z" fill="none"/><polyline points="6 9 12 15 18 9"/></svg></summary><ul class="mt-2 pb-4"><li><a href=#the-use-case>The Use Case</a></li><li><a href=#implementing-static-row-level-security-in-power-bi-desktop>Implementing Static Row-Level Security in Power BI Desktop</a></li><li><a href=#a-note-about-trust-issues-aka-testing-these-out>A Note About Trust Issues, aka Testing These Out</a></li><li><a href=#implementing-static-row-level-security-in-power-bi-service-power-bi-on-the-webaka-part-two>Implementing Static Row-Level Security in Power BI Service (Power BI on the Web)(AKA Part Two)</a></li><li><a href=#using-row-level-security-in-power-automate>Using Row-Level Security in Power Automate</a></li></ul></details><p>Power BI is not my normal wheelhouse, but when duty calls, I answer. I was recently asked to help update a report in Power BI that does all sorts of SQL calls to a database - how all of that works is a mystery to me. However, we were managing security by updating 19 different reports, one for each lab. This was a nightmare to maintain and update, as I discovered when my job was to go in and update all 19 of those reports. Enter row-level security, my new best friend. Read along to see how we implemented it and how we then used it in Power Automate to send out security-trimmed PDFs to our users on a monthly basis.</p><h2 id=the-use-case>The Use Case</h2><p>As I said, this report was not my original brainchild. It shows each of our 19 labs information about their storage - how much data are they storing, what does it cost, and a list of files that haven&rsquo;t been updated in 3 years that might be prime targets for archiving. This information is meant to be private to each lab - they should only see their own data.</p><p>This was working alright in 19 different reports until it was my job to go into each of those reports and add a new data source that allowed for better, more accurate targeting of what files were owned by which lab. I actually did go and update all 19 reports, but we started running into problems when I began publishing them - the modeling was getting messed up and all sorts of other things that are above my pay grade. So, we decided to move to a single report that would be filtered by the lab that was viewing it. This is where row-level security comes in.</p><h2 id=implementing-static-row-level-security-in-power-bi-desktop>Implementing Static Row-Level Security in Power BI Desktop</h2><p>Per my research, the method I&rsquo;m using here is called static row-level security, or RLS. You can get more advanced and go with dynamic RLS, but that wasn&rsquo;t necessary for our use case. Part of that decision comes from how often you need to update who has the rights to what, which wasn&rsquo;t going to be often for us. We also have the benefit that there are automatically maintained security groups in Azure that contain the users I&rsquo;d want to have the access, so I can just use those groups to manage the security.</p><p>To get started, click on the Modeling tab in Power BI, and click &ldquo;Manage roles&rdquo;. This will open the row-level security editor, though keep in mind - this is just PART ONE. There is a second component you will need to do, so don&rsquo;t just set things up here and think you are done!</p><p>You will need to decide what value you can filter on that will restrict the information correctly. For me, even though I have multiple data sources, they each have either a &ldquo;zone&rdquo; or a &ldquo;zone_name&rdquo; column that I can build RLS on. This is going to differ based on each use case, but just keep in mind that you can have multiple column filters set up like I&rsquo;m doing here.</p><p>First, I press the &ldquo;Create&rdquo; button and give the role a name. I&rsquo;m going to name my first one after my first lab, &ldquo;Bazzini&rdquo;. You can see that I&rsquo;ve got a list of tables available to filter on next to my Roles list. Click the three dots and hover over &ldquo;Add filter&rdquo; to see what columns are available to filter on for that table.</p><p><img src=/images/rowlevelsecurity1.png alt=Placeholder></p><p>I&rsquo;m going to filter on the &ldquo;zone&rdquo; column, so I click that to add it to my DAX editor/filter list. Basically what this is doing is helping us write a DAX expression to filter on, with the default value of, shockingly, &ldquo;Value&rdquo;.</p><p><img src=/images/rowlevelsecurity2.png alt=Placeholder></p><p>All the DAX writing you have to do is change &ldquo;Value&rdquo; to the name of your value you want to filter on - in my example, I&rsquo;m going to change it to &ldquo;bazzini&rdquo; (it is case sensitive, I believe).</p><p>You can add more than one filter on each table by repeating this process. It will add to your DAX editor as &ldquo;&& (new filter)&rdquo;. You can also filter based on more than one table, which is what I&rsquo;m doing. Notice in this screenshot that there are filter icons on two of the table names - that&rsquo;s because I am filtering one table for &ldquo;zone&rdquo; and one table for &ldquo;zone_name&rdquo;, based on the data source.</p><p><img src=/images/rowlevelsecurity3.png alt=Placeholder></p><p>Now I have a lot of filters to set up, but Power BI makes it pretty easy on me. When I go and make a new lab, notice that one of the options when you click the three dots is &ldquo;Copy table filter from&mldr;&rdquo; and it gives me a dropdown of all of the other roles I have created. Just select one of them and simply replace one value for the new value you need to filter on. I just have to do it twice for each new role I build since I&rsquo;m filtering on two tables.</p><p>If you want a role that can see everything, simply create the role and then don&rsquo;t add any filters. They will be able to see everything as if RLS wasn&rsquo;t even turned on.</p><p>Make sure to hit &ldquo;Save&rdquo; at the bottom when you are done building up your roles for now.</p><h2 id=a-note-about-trust-issues-aka-testing-these-out>A Note About Trust Issues, aka Testing These Out</h2><p>It can be scary trusting new things, and it can be especially scary when condensing what was 19 separate, private reports into one mega report. Power BI has things to help us there, too. Notice that button next to &ldquo;Manage roles&rdquo; in the &ldquo;Modeling&rdquo; tab that says &ldquo;View as&rdquo;? That lets you test out the restricted view of the report through the eyes of any of the new roles you&rsquo;ve just built. So, I can click on &ldquo;View as&rdquo; and then select &ldquo;Bazzini&rdquo; and see what the report looks like to someone who has that role.</p><p><img src=/images/rowlevelsecurity3point5.png alt=Placeholder></p><p>So now that I&rsquo;m viewing this new tab I just built, Sauka-Spengler, as someone with the Bazzini role, I can see just what I think I should be seeing, which is no private data for any other lab. I can also test out the other roles I&rsquo;ve built to make sure they are working as expected, which I tend to do as I build each one just to make sure I&rsquo;m not missing anything. Simply click &ldquo;Stop viewing&rdquo; when you want to go back to viewing the report as yourself.</p><h2 id=implementing-static-row-level-security-in-power-bi-service-power-bi-on-the-webaka-part-two>Implementing Static Row-Level Security in Power BI Service (Power BI on the Web)(AKA Part Two)</h2><p>Now, you aren&rsquo;t done yet, as I mentioned. Publish your report and go to Power BI on the web.</p><p>In your workspace that you&rsquo;ve published to, next to your report, you should see another item that has the same name but is of the type &ldquo;Semantic model&rdquo;, like in this picture. Click on the ellipses in that row and click &ldquo;Security&rdquo;.</p><p><img src=/images/rowlevelsecurity4.png alt=Placeholder></p><p>You will be taken to a new page that lists all of your previously defined roles. Click on the first one - &ldquo;Bazzini&rdquo; in my case - and then start typing in email addresses for individuals or groups (any type BUT M365 groups!) that you want to have access to what this role can see and click &ldquo;Add&rdquo; after each one. Make sure to click the &ldquo;Save&rdquo; button at the bottom of the page before you go to add people to another role.</p><p><img src=/images/rowlevelsecurity5.png alt=Placeholder></p><p>Now, when you go to share the report itself with someone who has that role, they should see the Power BI report as you generated it, but with no data showing up on the pages where you&rsquo;ve filtered the data. So in the screenshot below, this is another lab&rsquo;s page, as viewed by someone who has the Bazzini role. They can&rsquo;t see any data on this page, just it&rsquo;s structure and text, but they can see the data on their own Bazzini page per the RLS I&rsquo;ve set up.</p><p><img src=/images/rowlevelsecurity6.png alt=Placeholder></p><p>Keep in mind a limitation - when I was testing, at first I thought RLS wasn&rsquo;t working. That&rsquo;s because I used a report that I had published to a workspace that was collaborative, and my two test subjects were members of that workspace. Those permissions overruled RLS, so I had to publish to a private workspace and share the report with them that way to properly test. This is fine for my use case, as the people I&rsquo;m building the RLS for aren&rsquo;t members of the workspace either, but it did impact testing.</p><h2 id=using-row-level-security-in-power-automate>Using Row-Level Security in Power Automate</h2><p>Now, this report does no one any good if I don&rsquo;t share it out to people. Previously, I had set up a flow that looped through a SharePoint list of receipients and sent them each both a PDF of the report and a link to their individual report. That had to be re-thought with RLS in place, as the PDF generated would both not be filtered with RLS, and even if it was, it&rsquo;s not an ideal experience to get 19 pages of PDF where your data is only located on page 14.</p><p>This is going to be posted as a Part Two (when I actually figure out the best way to architect this), so stay tuned! Sneak peak - one of these red asterisks is a lie! 😂</p><p><img src=/images/fakeout1.png alt=Placeholder></p><script async src="https://www.googletagmanager.com/gtag/js?id=G-CN3PDT3T20"></script>
<script>window.dataLayer=window.dataLayer||[];function gtag(){dataLayer.push(arguments)}gtag("js",new Date),gtag("config","G-CN3PDT3T20")</script><blockquote></blockquote></article><div class="px-2 mb-2"><script src=https://giscus.app/client.js data-repo data-repo-id data-category data-category-id data-mapping=pathname data-strict=0 data-reactions-enabled=1 data-emit-metadata=0 data-input-position=bottom data-theme=preferred_color_scheme data-lang=en crossorigin=anonymous async></script></div><div class="bg-pink-100 dark:bg-gray-900"><div class="container px-4 py-12 mx-auto max-w-4xl grid grid-cols-1 md:grid-cols-2 gap-4 items-center"><div><div class="text-2xl font-bold mb-2">Follow me</div><p class=opacity-60>Follow along for Power Platform, M365, and cat goodness</p></div><ul class="flex justify-center gap-x-3 flex-wrap gap-y-2"><li><a href=https://linkedin.com/in/lindsaytshelton target=_blank rel=noopener aria-label=LinkedIn class="p-1 inline-block rounded-full border border-transparent text-gray-500 hover:text-gray-800 hover:border-gray-800 cursor-pointer transition-colors dark:text-gray-600 dark:hover:border-gray-300 dark:hover:text-gray-300"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentcolor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z" fill="none"/><rect x="4" y="4" width="16" height="16" rx="2"/><line x1="8" y1="11" x2="8" y2="16"/><line x1="8" y1="8" x2="8" y2="8.01"/><line x1="12" y1="16" x2="12" y2="11"/><path d="M16 16v-3a2 2 0 00-4 0"/></svg></a></li></ul></div></div></main><footer class="container p-6 mx-auto flex justify-between items-center"><span class="text-sm font-light">Copyright © 2024 - Lindsay Shelton · All rights reserved</span>
<span onclick='window.scrollTo({top:0,behavior:"smooth"})' class="p-1 cursor-pointer"><svg xmlns="http://www.w3.org/2000/svg" width="30" height="30" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentcolor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z" fill="none"/><path d="M18 15l-6-6-6 6h12"/></svg></span></footer><div class="search-ui absolute top-0 left-0 w-full h-full bg-white dark:bg-gray-800 hidden"><div class="container max-w-3xl mx-auto p-12"><div class=relative><div class="my-4 text-center text-2xl font-bold">Search</div><span class="p-2 absolute right-0 top-0 cursor-pointer close-search"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentcolor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z" fill="none"/><line x1="18" y1="6" x2="6" y2="18"/><line x1="6" y1="6" x2="18" y2="18"/></svg></span></div><input type=search class="py-2 px-3 w-full dark:text-black border dark:border-transparent" placeholder="Enter search query"><div class="search-results text-lg font-medium my-4 hidden">Results</div><ul class="search-list my-2"></ul><div class="no-results text-center my-8 hidden"><div class="text-xl font-semibold mb-2">No results found</div><p class="font-light text-sm">Try adjusting your search query</p></div></div></div><script src=https://blist.vercel.app/js/scripts.min.js></script>
<script>const darkmode=document.querySelector(".toggle-dark-mode");function toggleDarkMode(){document.documentElement.classList.contains("dark")?(document.documentElement.classList.remove("dark"),localStorage.setItem("darkmode","light")):(document.documentElement.classList.add("dark"),localStorage.setItem("darkmode","dark"))}darkmode&&darkmode.addEventListener("click",toggleDarkMode);const darkStorage=localStorage.getItem("darkmode"),isBrowserDark=window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").matches;!darkStorage&&isBrowserDark&&document.documentElement.classList.add("dark"),darkStorage&&darkStorage==="dark"&&toggleDarkMode()</script><script>const mobileMenuButton=document.querySelector(".mobile-menu-button"),mobileMenu=document.querySelector(".mobile-menu");function toggleMenu(){mobileMenu.classList.toggle("hidden"),mobileMenu.classList.toggle("flex")}mobileMenu&&mobileMenuButton&&mobileMenuButton.addEventListener("click",toggleMenu)</script></body></html>